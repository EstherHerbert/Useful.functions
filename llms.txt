# Useful.functions

This package brings together some functions I have created to perform
repetitive tasks.

***NB:** this README file is a work in progress, for more info on
functions please see the specific help files once the package is
installed*

## Installation

Install the latest release with the following code:

``` r
install.packages('devtools')
devtools::install_github("EstherHerbert/Useful.functions@*release")
library(Useful.functions)
```

If youâ€™d like to install the latest development version then you can
omit `@*release` from the call to `install_github()`.

## Functions

Functions in this package are roughly split into the following
categories:

- Working with data from Prospect
- Summary tables
- Functions for use with
  [`xtable::xtable()`](https://rdrr.io/pkg/xtable/man/xtable.html)
- Other functions

## Addins

Addins are functions with are used interactively within RStudio. There
are three Addins provided in this package and keyboard short cuts can be
created for them to speed up coding. More information on Addins can be
found, including how to set keyboard short cuts,
[here](https://docs.posit.co/ide/user/ide/guide/productivity/add-ins.html).

- Insert Section
- End Box
- Month Year

## Templates

### Report template

To save time when writing statistics reports I have created an R
Markdown template. Currently the report only exports to pdf (my personal
preference) but it could be modified to export to word.

You can access the template either by creating a new R Markdown document
from the menu in RStudio and then looking through the templates or using
`rmarkdown::draft("my-report.Rmd", template = "statistics-report", package = "Useful.functions")`.
Both of these options will create a folder with your report name
containing the markdown file and the templates required to generate the
report. I recommend you render it to pdf using
[`rmarkdown::render`](https://pkgs.rstudio.com/rmarkdown/reference/render.html)
rather than using the knit button.

### Presentation template

Similar to the report template, this R Markdown template creates a pdf
presentation using the
[beamer](https://en.wikibooks.org/wiki/LaTeX/Presentations) document
class in LaTeX.

### Project template

This project template sets up the recommended folder structure for an
analysis. It also copies in template `Master.R` and `Read-data.R`
scripts. Optionally, it can also:

- set-up a `.gitignore` file
- create a project specific `.Rprofile` to open `Master.R` whenever the
  project is opened.
- use the report template above to start a statistics report

You can access the project template either by using the
[`start_analysis()`](https://estherherbert.github.io/Useful.functions/reference/start_analysis.md)
function, or by creating a new project in RStudio from the menu.

# Package index

## Working with data from Prospect

- [`wrangle_lookups()`](https://estherherbert.github.io/Useful.functions/reference/wrangle_lookups.md)
  : Wrangle the Edith database specification into a single lookups data
  frame
- [`read_prospect()`](https://estherherbert.github.io/Useful.functions/reference/read_prospect.md)
  : Reads in csv files as exported by Prospect
- [`apply_labels()`](https://estherherbert.github.io/Useful.functions/reference/apply_labels.md)
  : Apply labels from a dataspec to a column
- [`export_check()`](https://estherherbert.github.io/Useful.functions/reference/export_check.md)
  : Checks imported form lengths against the export note produced by
  prospect.

## Summary tables

- [`continuous_table()`](https://estherherbert.github.io/Useful.functions/reference/continuous_table.md)
  : Produce a data frame to summaries continuous variables
- [`discrete_table()`](https://estherherbert.github.io/Useful.functions/reference/discrete_table.md)
  : Produce a data frame to summarise discrete variables
- [`yn_table()`](https://estherherbert.github.io/Useful.functions/reference/yn_table.md)
  : Produce a data frame to summarise discrete variables coded as Yes/No
- [`missing_table()`](https://estherherbert.github.io/Useful.functions/reference/missing_table.md)
  : Produce a dataframe to summarise data completeness for variables
- [`ticked_table()`](https://estherherbert.github.io/Useful.functions/reference/ticked_table.md)
  : Produce a dataframe to summarise ticked variables
- [`count_table()`](https://estherherbert.github.io/Useful.functions/reference/count_table.md)
  : Produce a data frame to summarise counts of events
- [`condense()`](https://estherherbert.github.io/Useful.functions/reference/condense.md)
  : Condense two or three columns into one

## Functions for use with `xtable`

- [`add_clines()`](https://estherherbert.github.io/Useful.functions/reference/add_clines.md)
  :

  Adds LaTex `\clines` to an object of class `"xtable"`

- [`add_multirow()`](https://estherherbert.github.io/Useful.functions/reference/add_multirow.md)
  : For use with latex summary tables

- [`longtable_head()`](https://estherherbert.github.io/Useful.functions/reference/longtable_head.md)
  :

  For use with `xtable`'s `add.to.row` when
  `tabular.environment = "longtable"`

- [`makerow()`](https://estherherbert.github.io/Useful.functions/reference/makerow.md)
  :

  For use with `xtable`'s `add.to.row`

- [`merge_colnames()`](https://estherherbert.github.io/Useful.functions/reference/merge_colnames.md)
  :

  For use with `xtable`'s `add.to.row` when column names are repeated
  and should be merged.

- [`prevent_pagebreak()`](https://estherherbert.github.io/Useful.functions/reference/prevent_pagebreak.md)
  :

  Preventing page breaks when using in long tables exported from
  `xtable()`

- [`sanitise_percent()`](https://estherherbert.github.io/Useful.functions/reference/sanitise_percent.md)
  :

  Sanitise function for use with `print.xtable`

## Other functions

- [`diagPlot()`](https://estherherbert.github.io/Useful.functions/reference/diagPlot.md)
  : Diagnostic plots
- [`file_stamp()`](https://estherherbert.github.io/Useful.functions/reference/file_stamp.md)
  : Produce a file name string with date-time stamp
- [`package_info()`](https://estherherbert.github.io/Useful.functions/reference/package_info.md)
  : package_info
- [`remove_duplicates()`](https://estherherbert.github.io/Useful.functions/reference/remove_duplicates.md)
  : For use with tables
- [`row_to_colnames()`](https://estherherbert.github.io/Useful.functions/reference/row_to_colnames.md)
  : Tools for working with column names
- [`colnames_to_row()`](https://estherherbert.github.io/Useful.functions/reference/colnames_to_row.md)
  : Move the column names of a data frame to a row
- [`search_list()`](https://estherherbert.github.io/Useful.functions/reference/search_list.md)
  : Searches a list of dataframes.
- [`split_colnames()`](https://estherherbert.github.io/Useful.functions/reference/split_colnames.md)
  : Tools for working with column names
- [`stata_expand()`](https://estherherbert.github.io/Useful.functions/reference/stata_expand.md)
  : Function to recreate the expand function in Stata
- [`strwrap_factor()`](https://estherherbert.github.io/Useful.functions/reference/strwrap_factor.md)
  : String wrapping for factor variables
- [`totals()`](https://estherherbert.github.io/Useful.functions/reference/totals.md)
  : Mutates data frame so that summary tables give totals
- [`display_unicol()`](https://estherherbert.github.io/Useful.functions/reference/display_unicol.md)
  [`get_unicol()`](https://estherherbert.github.io/Useful.functions/reference/display_unicol.md)
  : Use the University of Sheffield Colour Palette
- [`round0()`](https://estherherbert.github.io/Useful.functions/reference/round0.md)
  : Rounds numbers but keeps trailing zeros
- [`git_log()`](https://estherherbert.github.io/Useful.functions/reference/git_log.md)
  : Generates a log of git commits
- [`start_analysis()`](https://estherherbert.github.io/Useful.functions/reference/start_analysis.md)
  : Sets up the analysis folder

## Data

- [`unicol`](https://estherherbert.github.io/Useful.functions/reference/unicol.md)
  : University of Sheffield Colour Palette
- [`outcome`](https://estherherbert.github.io/Useful.functions/reference/outcome.md)
  : Simulated outcome data.
- [`outcome_aes`](https://estherherbert.github.io/Useful.functions/reference/outcome_aes.md)
  : Simulated AE data.

